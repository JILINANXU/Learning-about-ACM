#include <bits/stdc++.h>
using namespace std;
#define For(i,a,b) for(int i=(a);i<=(int)(b);i++)
#define ll long long
const int N=1e5+10;
ll n,m,a[N],L[N],R[N],pos[N],t,x,y,k,sum[N]={0},add[N]={0};
inline void start(){
	t=sqrt(n);
	R[0]=0;
	For(i,1,t){
		L[i]=R[i-1]+1;
		R[i]=L[i]+t-1;
		For(j,L[i],R[i]){
			pos[j]=i;
			sum[i]+=a[j];
		}
	}
	if(R[t]!=n){
		t++;
		L[t]=R[t-1]+1;
		R[t]=n;
		For(j,L[t],R[t]){
			pos[j]=t;
			sum[t]+=a[j];
		}
	}
}
void change(int l,int r,int d){
	int p=pos[l],q=pos[r];
	if(p==q){
		For(i,l,r){
			sum[p]+=d;
			a[i]+=d;
		}
	}else{
		For(i,p+1,q-1){
			add[i]+=d;
		}
		For(i,l,R[p]){
			sum[p]+=d;
			a[i]+=d;
		}
		For(i,L[q],r){
			sum[q]+=d;
			a[i]+=d;
		}
	}
}
ll print(int l,int r){
	ll ans=0;
	int p=pos[l],q=pos[r];
	if(p==q){
		For(i,l,r){
			ans+=a[i];
			ans+=add[p];
		}
	}else{
		For(i,p+1,q-1){
			ans+=sum[i];
			ans+=add[i]*(R[i]-L[i]+1);
		}
		For(i,l,R[p]){
			ans+=a[i];
			ans+=add[p];
		}
		For(i,L[q],r){
			ans+=a[i];
			ans+=add[q];
		}
	}
	return ans;
}
int main(){
	scanf("%lld%lld",&n,&m);
	For(i,1,n){
		scanf("%lld",&a[i]);
	}
	start();
	For(i,1,m){
		scanf("%lld%lld%lld",&k,&x,&y);
		if(k==1){
			scanf("%lld",&k);
			change(x,y,k);
		}else{
			printf("%lld\n",print(x,y));
		}
	}
	return 0;
}
